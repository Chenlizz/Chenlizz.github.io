<!DOCTYPE html>
<html>
    <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    
    <link href="/deps/partial/imgs/favicon.ico" type="image/x-icon" rel="icon">
    
    <title>
    
        react生命周期 | CLZ要长大
    
    </title>
        <link href="/deps/css/style.css" type="text/css" rel="stylesheet">
        <script src="/deps/js/jquery.min.js" type="application/javascript"></script>
        <link href="/deps/partial/mincss/nprogress.min.css" type="text/css" rel="stylesheet">
        <script src="/deps/js/nprogress.min.js" type="application/javascript"></script>
    
        <link href="/deps/partial/mincss/prism.min.css" type="text/css" rel="stylesheet">
        <script src="/deps/js/prism.min.js" type="application/javascript"></script>
        
    
</head>
    <body>
        <header class="header fixed-header">
    <div class="header-container">
        <a class="home-link" href="/">
            CLZ要长大
        </a>
        <ul class="right-list">
            
                <li class="list-item">
                    
                        <a href="/" class="item-link">Home</a>
                    
                </li>
            
                <li class="list-item">
                    
                        <a href="/archive/" class="item-link">Archive</a>
                    
                </li>
            
        </ul>
        <div class="menu-mask">
            <ul class="menu-list">
                
                    <li class="menu-item">
                        
                            <a href="/" class="menu-link">Home</a>
                        
                    </li>
                
                    <li class="menu-item">
                        
                            <a href="/archive/" class="menu-link">Archive</a>
                        
                    </li>
                
            </ul>
        </div>
    </div>
</header>
        <div id="article-banner">
    <h2>react生命周期</h2>
    <p class="post-date">08/05/2019</p>
</div>
<main class="app-body flex-box">
    <article class="post-article">
        <section class="markdown-content">
            <h2 id="react生命周期-v16-0前"><a href="#react生命周期-v16-0前" class="headerlink" title="react生命周期(v16.0前)"></a>react生命周期(v16.0前)</h2><ul>
<li>组件初始化(initialization)阶段<ul>
<li>继承react Component这个基类,获得render(),生命周期等方法可以使用；</li>
<li>super(props)用来调用基类的构造方法( constructor() ), 也将父组件的props注入给子组件；</li>
<li>constructor()用来做一些组件的初始化工作，如定义this.state的初始内容。</li>
</ul>
</li>
<li>组件的挂载(Mounting)阶段<ul>
<li>componentWillMount()<br>在这边调用this.setState不会引起组件重新渲染，也可以把写在这边的内容提前到constructor()中，很少用。</li>
<li>render()<br>render是纯函数,不能在里面执行this.setState，会有改变组件状态的副作用。</li>
<li>componentDidMount()</li>
</ul>
</li>
</ul>
<ul>
<li><p>组件的更新(update)阶段</p>
<ul>
<li>父组件重新render致更新<ul>
<li>父组件重新render导致的<strong>重传</strong>props，无论props有没有变化这可以通过shouldComponentUpdate(nextProps,nextState)优化。</li>
<li>props变化，在componentWillReceiveProps方法中，将props转换成自己的state。</li>
</ul>
</li>
<li>组件本身调用setState致更新</li>
</ul>
<p>updation分为：</p>
<ul>
<li>componentWillReceiveProps(nextProps)<br>父组件重传props时就会调用,但父组件render方法的调用不能保证重传给当前组件的props是有变化的。</li>
<li>shouldComponentUpdate(nextProps, nextState)<br>返回false则当前组件更新停止，可用于优化组件性能。</li>
<li>componentWillUpdate(nextProps, nextState)</li>
<li>render</li>
<li>componentDidUpdate(prevProps, prevState)</li>
</ul>
</li>
<li><p>卸载(Unmounting)阶段</p>
<ul>
<li>componentWillUnmount()<br>在组件被卸载前调用，可以在这里执行一些清理工作，比如清除组件中使用的定时器，清除componentDidMount中手动创建的DOM元素等，以避免引起内存泄漏。</li>
</ul>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5287253-bd799f87556b5ecc.png" alt="react生命周期"></p>

        </section>
        </br>
        <div class="article-footer">
            </br>
            <p>本文可能过时失效，若需更新，请留言</p>
            <!-- <p>本博客文章均为原创，转载请注明来源</p> -->
        </div>
        
    <div class="nav-container">
        
            <a class="nav-right" href="/2019/08/03/HTML执行顺序/">
                
                    HTML执行顺序（包含浏览器线程基础）
                
                <span class="nav-arrow"> →</span>
            </a>
        
        
    </div>

        
    </article>
    
        <aside class="catalog-container">
    <div class="toc-main">
        <strong class="toc-title">Catalog</strong>
        
            <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#react生命周期-v16-0前"><span class="toc-nav-text">react生命周期(v16.0前)</span></a></li></ol>
        
    </div>
</aside>
    
</main>

<script type="application/javascript">
(function(){
    var banner = "/deps/partial/imgs/banner.jpg"
    $('#article-banner').css({'background-image': 'url(' + banner + ')'})
    $('.header').removeClass('fixed-header')
})();
</script>


        <div class="scroll-top">
    <span class="arrow-icon"></span>
</div>
        <footer class="app-footer">
    <p class="copyright" align="center">
        &copy; 2019 陈黎姿博客 <a>(https://chenlizz.github.io/)<a/>
    </p>
</footer>

<script src="/deps/js/function.min.js" type="application/javascript"></script>


    </body>
</html>